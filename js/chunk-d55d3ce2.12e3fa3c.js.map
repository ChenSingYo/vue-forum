{"version":3,"sources":["webpack:///./src/views/UsersTop.vue","webpack:///./src/views/UsersTop.vue?862d","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["class","users","user","key","id","to","src","emptyImageFilter","image","width","height","name","followerCount","isFollowed","type","deleteFollowing","addFollowing","components","NavTabs","data","created","this","fetchTopUsers","methods","getTopUsers","status","Error","message","map","FollowerCount","console","error","fire","icon","title","userId","img","render","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-d55d3ce2.12e3fa3c.js","sourcesContent":["<template>\n  <div class=\"container py-5\">\n    <NavTabs />\n      <h1 class=\"mt-5\">\n        美食達人\n      </h1>\n      <hr>\n      <div class=\"row text-center\">\n        <div\n          v-for=\"user in users\"\n          :key=\"user.id\"\n          class=\"col-3\"\n        >\n          <router-link :to=\"{ name: 'user', params: { id: user.id } }\">\n            <img\n              :src=\"emptyImageFilter(user.image)\"\n              width=\"140\"\n              height=\"140\"\n            >\n          </router-link>\n          <h2>{{ user.name }}</h2>\n          <span\n            class=\"badge badge-secondary\"\n          >追蹤人數：{{ user.followerCount }}</span>\n          <p class=\"mt-3\">\n            <button\n              v-if=\"user.isFollowed\"\n              type=\"button\"\n              class=\"btn btn-danger\"\n              @click.stop.prevent=\"deleteFollowing(user.id)\"\n            >\n              取消追蹤\n            </button>\n            <button\n              v-else\n              type=\"button\"\n              class=\"btn btn-primary\"\n              @click.stop.prevent=\"addFollowing(user.id)\"\n            >\n              追蹤\n            </button>\n          </p>\n        </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport NavTabs from './../components/NavTabs'\nimport usersAPI from './../apis/users'\nimport { Toast } from './../utils/helpers'\nexport default {\n  name: 'UsersTop',\n  components: {\n    NavTabs\n  },\n  data () {\n    return {\n      users: []\n    }\n  },\n  created () {\n    this.fetchTopUsers()\n  },\n  methods: {\n    async fetchTopUsers () {\n      try {\n        const { data } = await usersAPI.getTopUsers()\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n        this.users = data.users.map(user => ({\n          id: user.id,\n          name: user.name,\n          image: user.image,\n          followerCount: user.FollowerCount,\n          isFollowed: user.isFollowed\n        }))\n      } catch (error) {\n        console.error(error.message)\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得美食達人，請稍後再試'\n        })\n      }\n    },\n    async addFollowing (userId) {\n      try {\n        const { data } = await usersAPI.addFollowing({ userId })\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.users = this.users.map(user => {\n          if (user.id !== userId) {\n            return user\n          } else {\n            return {\n              ...user,\n              followerCount: user.followerCount + 1,\n              isFollowed: true\n            }\n          }\n        })\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法加入追蹤，請稍後再試'\n        })\n      }\n    },\n    async deleteFollowing (userId) {\n      try {\n        const { data } = await usersAPI.deleteFollowing({ userId })\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.users = this.users.map(user => {\n          if (user.id !== userId) {\n            return user\n          } else {\n            return {\n              ...user,\n              followerCount: user.followerCount - 1,\n              isFollowed: false\n            }\n          }\n        })\n      } catch (error) {\n        Toast.fire({\n          icon: 'error',\n          title: '無法取消追蹤，請稍後再試'\n        })\n      }\n    },\n    emptyImageFilter (img) {\n      return img || 'https://via.placeholder.com/350x220/DFDFDF?text=No+Image'\n    }\n  }\n}\n</script>\n","import { render } from \"./UsersTop.vue?vue&type=template&id=d73a39fa\"\nimport script from \"./UsersTop.vue?vue&type=script&lang=js\"\nexport * from \"./UsersTop.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}