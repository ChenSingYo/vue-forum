{"version":3,"sources":["webpack:///./src/components/Spinner.vue?d4d7","webpack:///./src/components/Spinner.vue","webpack:///./src/components/Spinner.vue?c088","webpack:///./src/views/AdminRestaurants.vue","webpack:///./src/components/AdminRestaurantsTable.vue","webpack:///./src/components/AdminRestaurantsTable.vue?447e","webpack:///./src/views/AdminRestaurants.vue?6e1d","webpack:///./src/apis/admin.js","webpack:///./src/components/AdminNav.vue","webpack:///./src/components/AdminNav.vue?c69a"],"names":["class","script","render","__scopeId","to","scope","width","isLoading","restaurants","restaurant","key","id","Category","name","type","deleteRestaurant","components","Spinner","data","created","this","fetchRestaurants","methods","admin","get","status","Error","message","console","log","fire","icon","title","restaurantId","delete","filter","AdminNav","AdminRestaurantsTable","categories","apiHelper","create","post","update","categoryId","put","formData","getDetail","users","userId","isAdmin"],"mappings":"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","file":"js/chunk-0ebdf657.370b05d2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Spinner.vue?vue&type=style&index=0&id=bb4a7a2a&scoped=true&lang=css\"","<template>\n  <div class=\"spinner\">\n    <div class=\"bouncing-loader\">\n      <div />\n      <div />\n      <div />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.spinner {\n  padding-top: 100px;\n}\n.bouncing-loader {\n  display: flex;\n  justify-content: center;\n}\n.bouncing-loader > div {\n  width: 1rem;\n  height: 1rem;\n  margin: 3rem 0.2rem;\n  background: #bd2333;\n  border-radius: 50%;\n  animation: bouncing-loader 0.6s infinite alternate;\n}\n.bouncing-loader > div:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.bouncing-loader > div:nth-child(3) {\n  animation-delay: 0.4s;\n}\n@keyframes bouncing-loader {\n  from {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  to {\n    opacity: 0.1;\n    transform: translateY(-1rem);\n  }\n}\n</style>\n","import { render } from \"./Spinner.vue?vue&type=template&id=bb4a7a2a&scoped=true\"\nconst script = {}\n\nimport \"./Spinner.vue?vue&type=style&index=0&id=bb4a7a2a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-bb4a7a2a\"\n\nexport default script","<template>\n  <div class=\"container py-5\">\n    <AdminNav />\n\n    <router-link\n      to=\"/admin/restaurants/new\"\n      class=\"btn btn-primary mb-4\"\n    >\n      New Restaurant\n    </router-link>\n\n    <AdminRestaurantsTable />\n  </div>\n</template>\n\n<script>\nimport AdminNav from './../components/AdminNav'\nimport AdminRestaurantsTable from './../components/AdminRestaurantsTable'\n// const dummyData = {\n//   restaurant: {\n//     id: 2,\n//     name: 'Mrs. Mckenzie Johnston',\n//     tel: '567-714-6131 x621',\n//     address: '61371 Rosalinda Knoll',\n//     opening_hours: '08:00',\n//     description:\n//       'Quia pariatur perferendis architecto tenetur omnis pariatur tempore.',\n//     image: 'https://loremflickr.com/320/240/food,dessert,restaurant/?random=2',\n//     createdAt: '2019-06-22T09:00:43.000Z',\n//     updatedAt: '2019-06-22T09:00:43.000Z',\n//     CategoryId: 3,\n//     Category: {\n//       id: 3,\n//       name: '義大利料理',\n//       createdAt: '2019-06-22T09:00:43.000Z',\n//       updatedAt: '2019-06-22T09:00:43.000Z'\n//     }\n//   }\n// }\nexport default {\n  name: 'AdminRestaurant',\n  components: {\n    AdminNav,\n    AdminRestaurantsTable\n  }\n  // data () {\n  //   return {\n  //     restaurant: {\n  //       id: -1,\n  //       name: '',\n  //       categoryName: '',\n  //       image: '',\n  //       openingHours: '',\n  //       tel: '',\n  //       address: '',\n  //       description: ''\n  //     }\n  //   }\n  // }\n  // mounted () {\n  //   const { id: restaurantId } = this.$route.params\n  //   this.fetchRestaurant(restaurantId)\n  // },\n  // methods: {\n  //   fetchRestaurant (restaurantId) {\n  //     const { restaurant } = dummyData\n  //     this.restaurant = {\n  //       ...this.restaurant,\n  //       id: restaurant.id,\n  //       name: restaurant.name,\n  //       categoryName: restaurant.Category.name,\n  //       image: restaurant.image,\n  //       openingHours: restaurant.opening_hours,\n  //       tel: restaurant.tel,\n  //       address: restaurant.address,\n  //       description: restaurant.description\n  //     }\n  //   }\n  // }\n}\n</script>\n","<template>\n  <Spinner v-if=\"isLoading\" />\n  <table class=\"table\">\n    <thead class=\"thead-dark\">\n      <tr>\n        <th scope=\"col\">\n          #\n        </th>\n        <th scope=\"col\">\n          Category\n        </th>\n        <th scope=\"col\">\n          Name\n        </th>\n        <th scope=\"col\" width=\"300\">\n          操作\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"restaurant in restaurants\" :key=\"restaurant.id\">\n        <th scope=\"row\">\n          {{ restaurant.id }}\n        </th>\n        <td>{{ restaurant.Category ? restaurant.Category.name : '未分類' }}</td>\n        <td>{{ restaurant.name }}</td>\n        <td class=\"d-flex justify-content-between\">\n          <router-link\n            :to=\"{ name: 'admin-restaurant', params: { id: restaurant.id } }\"\n            class=\"btn btn-link\"\n          >\n            Show\n          </router-link>\n\n          <router-link\n            :to=\"{\n              name: 'admin-restaurant-edit',\n              params: {\n                id: restaurant.id\n              }\n            }\"\n            class=\"btn btn-link\"\n          >\n            Edit\n          </router-link>\n\n          <button\n            type=\"button\"\n            class=\"btn btn-link\"\n            @click.stop.prevent=\"deleteRestaurant(restaurant.id)\"\n          >\n            Delete\n          </button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport adminAPI from './../apis/admin'\nimport { Toast } from './../utils/helpers'\nimport Spinner from './../components/Spinner'\n\nexport default {\n  components: {\n    Spinner\n  },\n  data () {\n    return {\n      restaurants: [],\n      isLoading: true\n    }\n  },\n  created () {\n    this.fetchRestaurants()\n  },\n  methods: {\n    async fetchRestaurants () {\n      try {\n        this.isLoading = true\n        const { data } = await adminAPI.restaurants.get()\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n        this.restaurants = data.restaurants\n        this.isLoading = false\n      } catch (e) {\n        console.log('error', e)\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得餐廳，請稍後再試'\n        })\n        this.isLoading = false\n      }\n    },\n    async deleteRestaurant (restaurantId) {\n      try {\n        const { data } = await adminAPI.restaurants.delete({ restaurantId })\n        console.log(data)\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        this.restaurants = this.restaurants.filter(\n          restaurant => restaurant.id !== restaurantId\n        )\n        Toast.fire({\n          icon: 'success',\n          title: '成功刪除餐廳'\n        })\n      } catch (e) {\n        console.log(e)\n        Toast.fire({\n          icon: 'error',\n          title: '無法刪除餐廳，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./AdminRestaurantsTable.vue?vue&type=template&id=5094c201\"\nimport script from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./AdminRestaurants.vue?vue&type=template&id=946d6d18\"\nimport script from \"./AdminRestaurants.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurants.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { apiHelper } from './../utils/helpers'\n\nexport default {\n  categories: {\n    get () {\n      return apiHelper.get('/admin/categories')\n    },\n    create ({ name }) {\n      return apiHelper.post('/admin/categories', { name })\n    },\n    update ({ categoryId, name }) {\n      return apiHelper.put(`/admin/categories/${categoryId}`, { name })\n    },\n    delete ({ categoryId }) {\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\n    }\n  },\n  restaurants: {\n    create ({ formData }) {\n      return apiHelper.post('/admin/restaurants', formData)\n    },\n    get () {\n      return apiHelper.get('/admin/restaurants')\n    },\n    getDetail ({ restaurantId }) {\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\n    },\n    update ({ restaurantId, formData }) {\n      return apiHelper.put(`/admin/restaurants/${restaurantId}`, formData)\n    },\n    delete ({ restaurantId }) {\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\n    }\n  },\n  users: {\n    get () {\n      return apiHelper.get('/admin/users')\n    },\n    update ({ userId, isAdmin }) {\n      return apiHelper.put(`/admin/users/${userId}`, { isAdmin })\n    }\n  }\n}\n","<template>\n  <div class=\"mb-3\">\n    <h1>餐廳後台</h1>\n    <router-link to=\"/admin/restaurants\">\n      Restaurants\n    </router-link> |\n    <router-link to=\"/admin/categories\">Categories</router-link> |\n    <router-link\n      to=\"/admin/users\"\n    >\n      Users\n    </router-link>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AdminNav'\n}\n</script>\n","import { render } from \"./AdminNav.vue?vue&type=template&id=add7975e\"\nimport script from \"./AdminNav.vue?vue&type=script&lang=js\"\nexport * from \"./AdminNav.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}