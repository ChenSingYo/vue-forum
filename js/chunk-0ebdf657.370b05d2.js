(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ebdf657"],{"102b":function(t,e,n){"use strict";n("5d80")},2375:function(t,e,n){"use strict";var a=n("7a23"),r=Object(a["H"])("data-v-bb4a7a2a");Object(a["s"])("data-v-bb4a7a2a");var c={class:"spinner"},s=Object(a["g"])("div",{class:"bouncing-loader"},[Object(a["g"])("div"),Object(a["g"])("div"),Object(a["g"])("div")],-1);Object(a["q"])();var u=r((function(t,e){return Object(a["p"])(),Object(a["d"])("div",c,[s])}));n("102b");const i={};i.render=u,i.__scopeId="data-v-bb4a7a2a";e["a"]=i},"5d80":function(t,e,n){},"73a3":function(t,e,n){"use strict";n.r(e);var a=n("7a23"),r={class:"container py-5"},c=Object(a["f"])(" New Restaurant ");function s(t,e,n,s,u,i){var o=Object(a["w"])("AdminNav"),b=Object(a["w"])("router-link"),d=Object(a["w"])("AdminRestaurantsTable");return Object(a["p"])(),Object(a["d"])("div",r,[Object(a["g"])(o),Object(a["g"])(b,{to:"/admin/restaurants/new",class:"btn btn-primary mb-4"},{default:Object(a["E"])((function(){return[c]})),_:1}),Object(a["g"])(d)])}var u=n("e04c"),i=(n("b0c0"),{class:"table"}),o=Object(a["g"])("thead",{class:"thead-dark"},[Object(a["g"])("tr",null,[Object(a["g"])("th",{scope:"col"}," # "),Object(a["g"])("th",{scope:"col"}," Category "),Object(a["g"])("th",{scope:"col"}," Name "),Object(a["g"])("th",{scope:"col",width:"300"}," 操作 ")])],-1),b={scope:"row"},d={class:"d-flex justify-content-between"},l=Object(a["f"])(" Show "),j=Object(a["f"])(" Edit ");function O(t,e,n,r,c,s){var u=Object(a["w"])("Spinner"),O=Object(a["w"])("router-link");return Object(a["p"])(),Object(a["d"])(a["a"],null,[c.isLoading?(Object(a["p"])(),Object(a["d"])(u,{key:0})):Object(a["e"])("",!0),Object(a["g"])("table",i,[o,Object(a["g"])("tbody",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["v"])(c.restaurants,(function(t){return Object(a["p"])(),Object(a["d"])("tr",{key:t.id},[Object(a["g"])("th",b,Object(a["y"])(t.id),1),Object(a["g"])("td",null,Object(a["y"])(t.Category?t.Category.name:"未分類"),1),Object(a["g"])("td",null,Object(a["y"])(t.name),1),Object(a["g"])("td",d,[Object(a["g"])(O,{to:{name:"admin-restaurant",params:{id:t.id}},class:"btn btn-link"},{default:Object(a["E"])((function(){return[l]})),_:2},1032,["to"]),Object(a["g"])(O,{to:{name:"admin-restaurant-edit",params:{id:t.id}},class:"btn btn-link"},{default:Object(a["E"])((function(){return[j]})),_:2},1032,["to"]),Object(a["g"])("button",{type:"button",class:"btn btn-link",onClick:Object(a["G"])((function(e){return s.deleteRestaurant(t.id)}),["stop","prevent"])}," Delete ",8,["onClick"])])])})),128))])])],64)}var f=n("1da1"),g=(n("4de4"),n("96cf"),n("be6c")),m=n("2fa3"),p=n("2375"),v={components:{Spinner:p["a"]},data:function(){return{restaurants:[],isLoading:!0}},created:function(){this.fetchRestaurants()},methods:{fetchRestaurants:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,g["a"].restaurants.get();case 4:if(n=e.sent,a=n.data,"error"!==a.status){e.next=8;break}throw new Error(a.message);case 8:t.restaurants=a.restaurants,t.isLoading=!1,e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log("error",e.t0),m["a"].fire({icon:"error",title:"無法取得餐廳，請稍後再試"}),t.isLoading=!1;case 17:case"end":return e.stop()}}),e,null,[[0,12]])})))()},deleteRestaurant:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g["a"].restaurants.delete({restaurantId:t});case 3:if(a=n.sent,r=a.data,console.log(r),"success"===r.status){n.next=8;break}throw new Error(r.message);case 8:e.restaurants=e.restaurants.filter((function(e){return e.id!==t})),m["a"].fire({icon:"success",title:"成功刪除餐廳"}),n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](0),console.log(n.t0),m["a"].fire({icon:"error",title:"無法刪除餐廳，請稍後再試"});case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))()}}};v.render=O;var w=v,h={name:"AdminRestaurant",components:{AdminNav:u["a"],AdminRestaurantsTable:w}};h.render=s;e["default"]=h},be6c:function(t,e,n){"use strict";n("b0c0");var a=n("2fa3");e["a"]={categories:{get:function(){return a["b"].get("/admin/categories")},create:function(t){var e=t.name;return a["b"].post("/admin/categories",{name:e})},update:function(t){var e=t.categoryId,n=t.name;return a["b"].put("/admin/categories/".concat(e),{name:n})},delete:function(t){var e=t.categoryId;return a["b"].delete("/admin/categories/".concat(e))}},restaurants:{create:function(t){var e=t.formData;return a["b"].post("/admin/restaurants",e)},get:function(){return a["b"].get("/admin/restaurants")},getDetail:function(t){var e=t.restaurantId;return a["b"].get("/admin/restaurants/".concat(e))},update:function(t){var e=t.restaurantId,n=t.formData;return a["b"].put("/admin/restaurants/".concat(e),n)},delete:function(t){var e=t.restaurantId;return a["b"].delete("/admin/restaurants/".concat(e))}},users:{get:function(){return a["b"].get("/admin/users")},update:function(t){var e=t.userId,n=t.isAdmin;return a["b"].put("/admin/users/".concat(e),{isAdmin:n})}}}},e04c:function(t,e,n){"use strict";var a=n("7a23"),r={class:"mb-3"},c=Object(a["g"])("h1",null,"餐廳後台",-1),s=Object(a["f"])(" Restaurants "),u=Object(a["f"])(" | "),i=Object(a["f"])("Categories"),o=Object(a["f"])(" | "),b=Object(a["f"])(" Users ");function d(t,e,n,d,l,j){var O=Object(a["w"])("router-link");return Object(a["p"])(),Object(a["d"])("div",r,[c,Object(a["g"])(O,{to:"/admin/restaurants"},{default:Object(a["E"])((function(){return[s]})),_:1}),u,Object(a["g"])(O,{to:"/admin/categories"},{default:Object(a["E"])((function(){return[i]})),_:1}),o,Object(a["g"])(O,{to:"/admin/users"},{default:Object(a["E"])((function(){return[b]})),_:1})])}var l={name:"AdminNav"};l.render=d;e["a"]=l}}]);
//# sourceMappingURL=chunk-0ebdf657.370b05d2.js.map