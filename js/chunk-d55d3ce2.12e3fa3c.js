(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d55d3ce2"],{"22ab":function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),a={class:"container py-5"},c=Object(n["g"])("h1",{class:"mt-5"}," 美食達人 ",-1),o=Object(n["g"])("hr",null,null,-1),s={class:"row text-center"},i={class:"badge badge-secondary"},u={class:"mt-3"};function l(e,t,r,l,d,b){var p=Object(n["w"])("NavTabs"),w=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])("div",a,[Object(n["g"])(p),c,o,Object(n["g"])("div",s,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(d.users,(function(e){return Object(n["p"])(),Object(n["d"])("div",{key:e.id,class:"col-3"},[Object(n["g"])(w,{to:{name:"user",params:{id:e.id}}},{default:Object(n["E"])((function(){return[Object(n["g"])("img",{src:b.emptyImageFilter(e.image),width:"140",height:"140"},null,8,["src"])]})),_:2},1032,["to"]),Object(n["g"])("h2",null,Object(n["y"])(e.name),1),Object(n["g"])("span",i,"追蹤人數："+Object(n["y"])(e.followerCount),1),Object(n["g"])("p",u,[e.isFollowed?(Object(n["p"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:Object(n["G"])((function(t){return b.deleteFollowing(e.id)}),["stop","prevent"])}," 取消追蹤 ",8,["onClick"])):(Object(n["p"])(),Object(n["d"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:Object(n["G"])((function(t){return b.addFollowing(e.id)}),["stop","prevent"])}," 追蹤 ",8,["onClick"]))])])})),128))])])}var d=r("5530"),b=r("1da1"),p=(r("96cf"),r("d81d"),r("8bb1")),w=r("4cce"),f=r("2fa3"),m={name:"UsersTop",components:{NavTabs:p["a"]},data:function(){return{users:[]}},created:function(){this.fetchTopUsers()},methods:{fetchTopUsers:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w["a"].getTopUsers();case 3:if(r=t.sent,n=r.data,"error"!==n.status){t.next=7;break}throw new Error(n.message);case 7:e.users=n.users.map((function(e){return{id:e.id,name:e.name,image:e.image,followerCount:e.FollowerCount,isFollowed:e.isFollowed}})),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0.message),f["a"].fire({icon:"error",title:"無法取得美食達人，請稍後再試"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},addFollowing:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].addFollowing({userId:e});case 3:if(n=r.sent,a=n.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.users=t.users.map((function(t){return t.id!==e?t:Object(d["a"])(Object(d["a"])({},t),{},{followerCount:t.followerCount+1,isFollowed:!0})})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),f["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},deleteFollowing:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w["a"].deleteFollowing({userId:e});case 3:if(n=r.sent,a=n.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.users=t.users.map((function(t){return t.id!==e?t:Object(d["a"])(Object(d["a"])({},t),{},{followerCount:t.followerCount-1,isFollowed:!1})})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),f["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},emptyImageFilter:function(e){return e||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"}}};m.render=l;t["default"]=m},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,c=r("1dde"),o=c("map");n({target:"Array",proto:!0,forced:!o},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-d55d3ce2.12e3fa3c.js.map