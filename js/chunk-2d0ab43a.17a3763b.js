(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),s={class:"album py-5 bg-light"},a={class:"container"},c={class:"row"},l={class:"col-md-4"},o={class:"col-md-8"},i=Object(n["g"])("br",null,null,-1);function u(e,t,r,u,d,b){var g=Object(n["w"])("UserProfileCard"),j=Object(n["w"])("UserFollowingsCard"),O=Object(n["w"])("UserFollowersCard"),m=Object(n["w"])("UserCommentsCard"),f=Object(n["w"])("UserFavRestaurantsCard");return Object(n["p"])(),Object(n["d"])("div",s,[Object(n["g"])("div",a,[Object(n["g"])(g,{user:d.user,"is-current-user":e.currentUser.id===d.user.id,initialIsFollowed:d.isFollowed},null,8,["user","is-current-user","initialIsFollowed"]),Object(n["g"])("div",c,[Object(n["g"])("div",l,[Object(n["g"])(j,{followings:d.followings},null,8,["followings"]),Object(n["g"])(O,{followers:d.followers},null,8,["followers"])]),Object(n["g"])("div",o,[Object(n["g"])(m,{comments:d.comments},null,8,["comments"]),i,Object(n["g"])(f,{"favorited-restaurants":d.favoritedRestaurants},null,8,["favorited-restaurants"])])])])])}var d=r("1da1"),b=r("5530"),g=(r("96cf"),r("b0c0"),r("5502")),j=r("4cce"),O=r("2fa3"),m={class:"card mb-3"},f={class:"row no-gutters"},w={class:"col-md-4"},p={class:"col-md-8"},v={class:"card-body"},h={class:"card-title"},y={class:"card-text"},F={class:"list-unstyled"},k=Object(n["f"])(" 已評論餐廳 "),U=Object(n["f"])(" 收藏的餐廳 "),C=Object(n["f"])(" followings (追蹤者) "),R=Object(n["f"])(" followers (追隨者) "),x=Object(n["f"])(" Edit ");function L(e,t,r,s,a,c){var l=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])("div",m,[Object(n["g"])("div",f,[Object(n["g"])("div",w,[Object(n["g"])("img",{src:r.user.image,width:"300px",height:"300px"},null,8,["src"])]),Object(n["g"])("div",p,[Object(n["g"])("div",v,[Object(n["g"])("h5",h,Object(n["y"])(r.user.name),1),Object(n["g"])("p",y,Object(n["y"])(r.user.email),1),Object(n["g"])("ul",F,[Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["y"])(r.user.commentsLength),1),k]),Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["y"])(r.user.favoritedRestaurantsLength),1),U]),Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["y"])(r.user.followingsLength),1),C]),Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["y"])(r.user.followersLength),1),R])]),r.isCurrentUser?(Object(n["p"])(),Object(n["d"])(l,{key:0,to:{name:"user-edit",params:{id:r.user.id}},class:"btn btn-primary"},{default:Object(n["E"])((function(){return[x]})),_:1},8,["to"])):(Object(n["p"])(),Object(n["d"])(n["a"],{key:1},[a.isFollowed?(Object(n["p"])(),Object(n["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(e){return c.deleteFollowing(r.user.id)})}," 取消追蹤 ")):(Object(n["p"])(),Object(n["d"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(e){return c.addFollowing(r.user.id)})}," 追蹤 "))],64))])])])])}var E={name:"UserProfileCard",props:{user:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0},isCurrentUser:{type:Boolean,required:!0}},data:function(){return{isFollowed:this.initialIsFollowed}},computed:Object(b["a"])({},Object(g["b"])(["currentUser"])),watch:{initialIsFollowed:function(e){this.isFollowed=e}},methods:{addFollowing:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j["a"].addFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:t.isFollowed=!0,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0.message),O["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},deleteFollowing:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j["a"].deleteFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:t.isFollowed=!1,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.error(r.t0.message),O["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}};E.render=L;var I=E,_={class:"card"},A={class:"card-header"},q=Object(n["f"])(" followings (追蹤者)"),P={class:"card-body"},B=Object(n["g"])("br",null,null,-1);function J(e,t,r,s,a,c){var l=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])(n["a"],null,[Object(n["g"])("div",_,[Object(n["g"])("div",A,[Object(n["g"])("strong",null,Object(n["y"])(r.followings.length),1),q]),Object(n["g"])("div",P,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.followings,(function(e){return Object(n["p"])(),Object(n["d"])(l,{key:e.id,to:{name:"user",params:{id:r.followings.id}}},{default:Object(n["E"])((function(){return[Object(n["g"])("img",{src:e.image,alt:"empty image",width:"60",height:"60",class:"mr-1"},null,8,["src"])]})),_:2},1032,["to"])})),128))])]),B],64)}var $={name:"UserFollowingsCard",props:{followings:{type:Array}}};$.render=J;var z=$,D={class:"card"},G={class:"card-header"},H=Object(n["f"])(" followers (追蹤者)"),K={class:"card-body"},M=Object(n["g"])("br",null,null,-1);function N(e,t,r,s,a,c){var l=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])(n["a"],null,[Object(n["g"])("div",D,[Object(n["g"])("div",G,[Object(n["g"])("strong",null,Object(n["y"])(r.followers.length),1),H]),Object(n["g"])("div",K,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.followers,(function(e){return Object(n["p"])(),Object(n["d"])(l,{key:e.id,to:{name:"user",params:{id:r.followers.id}}},{default:Object(n["E"])((function(){return[Object(n["g"])("img",{src:e.image,alt:"empty image",width:"60",height:"60",class:"mr-1"},null,8,["src"])]})),_:2},1032,["to"])})),128))])]),M],64)}var Q={name:"UserFollowersCard",props:{followers:{type:Array}}};Q.render=N;var S=Q,T={class:"card"},V={class:"card-header"},W=Object(n["f"])(" 已評論餐廳"),X={class:"card-body"};function Y(e,t,r,s,a,c){var l=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])("div",T,[Object(n["g"])("div",V,[Object(n["g"])("strong",null,Object(n["y"])(r.comments.length),1),W]),Object(n["g"])("div",X,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.comments,(function(e){return Object(n["p"])(),Object(n["d"])(l,{key:e.id,to:{name:"restaurant",params:{id:e.Restaurant.id}}},{default:Object(n["E"])((function(){return[Object(n["g"])("img",{src:e.Restaurant.image,width:"60",height:"60","object-fit":"cover",class:"avatar mr-2 mb-2"},null,8,["src"])]})),_:2},1032,["to"])})),128))])])}var Z={name:"UserCommentsCard",props:{comments:{type:Array}}};Z.render=Y;var ee=Z,te={class:"card"},re={class:"card-header"},ne=Object(n["f"])(" 收藏的餐廳 "),se={class:"card-body"};function ae(e,t,r,s,a,c){var l=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])("div",te,[Object(n["g"])("div",re,[Object(n["g"])("strong",null,Object(n["y"])(r.favoritedRestaurants.length),1),ne]),Object(n["g"])("div",se,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.favoritedRestaurants,(function(e){return Object(n["p"])(),Object(n["d"])(l,{key:e.id,to:{name:"restaurant",params:{id:e.id}}},{default:Object(n["E"])((function(){return[Object(n["g"])("img",{src:e.image,alt:"empty image",width:"60",height:"60",class:"mr-1 mb-1"},null,8,["src"])]})),_:2},1032,["to"])})),128))])])}var ce={props:{favoritedRestaurants:{type:Array}}};ce.render=ae;var le=ce,oe={name:"User",components:{UserProfileCard:I,UserFollowingsCard:z,UserFollowersCard:S,UserCommentsCard:ee,UserFavRestaurantsCard:le},data:function(){return{user:{id:0,image:"",name:"",email:"",followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0},isFollowed:!1,followings:[],followers:[],comments:[],favoritedRestaurants:[]}},computed:Object(b["a"])({},Object(g["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUser(e)},beforeRouteUpdate:function(e,t,r){var n=e.params.id;this.fetchUser(n),r()},methods:{fetchUser:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,s,a,c,l,o,i,u,d,g,m,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,j["a"].get({userId:e});case 3:if(n=r.sent,s=n.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:a=s.profile,c=s.isFollowed,l=a.id,o=a.image,i=a.name,u=a.email,d=a.Followings,g=a.Followers,m=a.Comments,f=a.FavoritedRestaurants,t.user=Object(b["a"])(Object(b["a"])({},t.user),{},{id:l,image:o,name:i,email:u,followingsLength:d.length,followersLength:g.length,commentsLength:m.length,favoritedRestaurantsLength:f.length}),t.isFollowed=c,t.followings=d,t.follwers=g,t.favoritedRestaurants=f,r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](0),console.log(r.t0),O["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()}}};oe.render=u;t["default"]=oe}}]);
//# sourceMappingURL=chunk-2d0ab43a.17a3763b.js.map