(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c002a722"],{"12b2":function(e,t,r){"use strict";r("b0c0"),r("a4d3"),r("e01a");var n=r("7a23"),a={class:"form-group"},o=Object(n["g"])("label",{for:"name"},"Name",-1),i={class:"form-group"},c=Object(n["g"])("label",{for:"categoryId"},"Category",-1),s=Object(n["g"])("option",{value:"",selected:"",disabled:""}," --請選擇-- ",-1),u={class:"form-group"},l=Object(n["g"])("label",{for:"tel"},"Tel",-1),d={class:"form-group"},f=Object(n["g"])("label",{for:"address"},"Address",-1),b={class:"form-group"},m=Object(n["g"])("label",{for:"opening-hours"},"Opening Hours",-1),g={class:"form-group"},p=Object(n["g"])("label",{for:"description"},"Description",-1),h={class:"form-group"},v=Object(n["g"])("label",{for:"image"},"Image",-1);function y(e,t,r,y,j,O){return Object(n["F"])((Object(n["p"])(),Object(n["d"])("form",{onSubmit:t[8]||(t[8]=Object(n["G"])((function(){return O.handleSubmit&&O.handleSubmit.apply(O,arguments)}),["stop","prevent"]))},[Object(n["g"])("div",a,[o,Object(n["F"])(Object(n["g"])("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=function(e){return j.restaurant.name=e}),type:"text",class:"form-control",name:"name",placeholder:"Enter name"},null,512),[[n["B"],j.restaurant.name]])]),Object(n["g"])("div",i,[c,Object(n["F"])(Object(n["g"])("select",{id:"categoryId","onUpdate:modelValue":t[2]||(t[2]=function(e){return j.restaurant.categoryId=e}),class:"form-control",name:"categoryId"},[s,(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(j.categories,(function(e){return Object(n["p"])(),Object(n["d"])("option",{key:e.id,value:e.id},Object(n["y"])(e.name),9,["value"])})),128))],512),[[n["A"],j.restaurant.categoryId]])]),Object(n["g"])("div",u,[l,Object(n["F"])(Object(n["g"])("input",{id:"tel","onUpdate:modelValue":t[3]||(t[3]=function(e){return j.restaurant.tel=e}),type:"text",class:"form-control",name:"tel",placeholder:"Enter telephone number"},null,512),[[n["B"],j.restaurant.tel]])]),Object(n["g"])("div",d,[f,Object(n["F"])(Object(n["g"])("input",{id:"address","onUpdate:modelValue":t[4]||(t[4]=function(e){return j.restaurant.address=e}),type:"text",class:"form-control",placeholder:"Enter address",name:"address"},null,512),[[n["B"],j.restaurant.address]])]),Object(n["g"])("div",b,[m,Object(n["F"])(Object(n["g"])("input",{id:"opening-hours","onUpdate:modelValue":t[5]||(t[5]=function(e){return j.restaurant.opening_hours=e}),type:"time",class:"form-control",name:"opening_hours"},null,512),[[n["B"],j.restaurant.opening_hours]])]),Object(n["g"])("div",g,[p,Object(n["F"])(Object(n["g"])("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=function(e){return j.restaurant.description=e}),class:"form-control",rows:"3",name:"description"},null,512),[[n["B"],j.restaurant.description]])]),Object(n["g"])("div",h,[v,j.restaurant.image?(Object(n["p"])(),Object(n["d"])("img",{key:0,class:"d-block img-thumbnail mb-3",width:"500",height:"auto",src:j.restaurant.image},null,8,["src"])):Object(n["e"])("",!0),Object(n["g"])("input",{id:"image",type:"file",name:"image",accept:"image/*",class:"form-control-file",onChange:t[7]||(t[7]=function(){return O.handleFileChange&&O.handleFileChange.apply(O,arguments)})},null,32)]),Object(n["g"])("button",{type:"submit",class:"btn btn-primary",disabled:r.isProcessing},Object(n["y"])(r.isProcessing?"處理中":"送出"),9,["disabled"])],544)),[[n["C"],!j.isLoading]])}var j=r("1da1"),O=r("5530"),w=(r("2b3d"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("be6c")),A=r("2fa3"),I={name:"AdminRestaurantForm",props:{initialRestaurant:{type:Object,default:function(){return{name:"",categoryId:"",tel:"",address:"",description:"",image:"",openingHours:""}}},isProcessing:{type:Boolean,default:!1}},data:function(){return{categories:[],restaurant:Object(O["a"])({},this.initialRestaurant),isLoading:!0}},created:function(){this.fetchCategories()},watch:{initialRestaurant:function(e,t){console.log("watch",{newValue:e,oldValue:t}),this.restaurant=Object(O["a"])(Object(O["a"])({},this.restaurant),e)}},beforeRouteUpdate:function(e,t,r){console.log("beforeRouteUpdate",{to:e,from:t});var n=e.params.id;this.fetchRestaurant(n)},methods:{fetchCategories:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w["a"].categories.get();case 3:r=t.sent,n=r.data,e.categories=n.categories,e.isLoading=!1,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),e.isLoading=!0,console.log(t.t0.massege),A["a"].fire({icon:"error",title:"無法取得餐廳類別，請稍後再試"});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},handleFileChange:function(e){var t=e.target.files;if(console.log("files",t),0===t.length)this.restaurant.image="";else{var r=window.URL.createObjectURL(t[0]);console.log("imageURL",r),this.restaurant.image=r}},handleSubmit:function(e){if(this.restaurant.name)if(this.restaurant.categoryId){var t=e.target,r=new FormData(t);this.$emit("after-submit",r)}else A["a"].fire({icon:"warning",title:"請選擇餐廳類別"});else A["a"].fire({icon:"warning",title:"請填寫餐廳名稱"})}}};I.render=y;t["a"]=I},2743:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"container py-5"};function o(e,t,r,o,i,c){var s=Object(n["w"])("AdminRestaurantForm");return Object(n["p"])(),Object(n["d"])("div",a,[Object(n["g"])(s,{onAfterSubmit:c.handleAfterSubmit,"is-Processing":i.isProcessing},null,8,["onAfterSubmit","is-Processing"])])}function i(e){if(Array.isArray(e))return e}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0");function c(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)if(r.push(i.value),t&&r.length===t)break}catch(s){a=!0,o=s}finally{try{n||null==c["return"]||c["return"]()}finally{if(a)throw o}}return r}}r("fb6a"),r("b0c0"),r("a630");function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return i(e)||c(e,t)||u(e,t)||l()}function f(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=u(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}var b=r("1da1"),m=(r("96cf"),r("12b2")),g=r("be6c"),p=r("2fa3"),h={name:"AdminRestaurantNew",components:{AdminRestaurantForm:m["a"]},data:function(){return{isProcessing:!1}},methods:{handleAfterSubmit:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isProcessing=!0,r.next=4,g["a"].restaurants.create({formData:e});case 4:if(n=r.sent,a=n.data,"success"===a.status){r.next=8;break}throw new Error(a.message);case 8:t.$router.push({name:"admin-restaurants"}),r.next=16;break;case 11:r.prev=11,r.t0=r["catch"](0),t.isProcessing=!1,console.log(r.t0.massege),p["a"].fire({icon:"error",title:"無法取得餐廳類別，請稍後再試"});case 16:o=f(e.entries());try{for(o.s();!(i=o.n()).done;)c=d(i.value,2),s=c[0],u=c[1],console.log(s+":"+u)}catch(l){o.e(l)}finally{o.f()}case 18:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}};h.render=o;t["default"]=h},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),o=r("1c7e"),i=!o((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:i},{from:a})},be6c:function(e,t,r){"use strict";r("b0c0");var n=r("2fa3");t["a"]={categories:{get:function(){return n["b"].get("/admin/categories")},create:function(e){var t=e.name;return n["b"].post("/admin/categories",{name:t})},update:function(e){var t=e.categoryId,r=e.name;return n["b"].put("/admin/categories/".concat(t),{name:r})},delete:function(e){var t=e.categoryId;return n["b"].delete("/admin/categories/".concat(t))}},restaurants:{create:function(e){var t=e.formData;return n["b"].post("/admin/restaurants",t)},get:function(){return n["b"].get("/admin/restaurants")},getDetail:function(e){var t=e.restaurantId;return n["b"].get("/admin/restaurants/".concat(t))},update:function(e){var t=e.restaurantId,r=e.formData;return n["b"].put("/admin/restaurants/".concat(t),r)},delete:function(e){var t=e.restaurantId;return n["b"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return n["b"].get("/admin/users")},update:function(e){var t=e.userId,r=e.isAdmin;return n["b"].put("/admin/users/".concat(t),{isAdmin:r})}}}},d28b:function(e,t,r){var n=r("746f");n("iterator")},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),o=r("e8b5"),i=r("23cb"),c=r("50c4"),s=r("fc6a"),u=r("8418"),l=r("b622"),d=r("1dde"),f=d("slice"),b=l("species"),m=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,n,l,d=s(this),f=c(d.length),p=i(e,f),h=i(void 0===t?f:t,f);if(o(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?a(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(d,p,h);for(n=new(void 0===r?Array:r)(g(h-p,0)),l=0;p<h;p++,l++)p in d&&u(n,l,d[p]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-c002a722.f56e256b.js.map