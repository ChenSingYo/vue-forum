{"version":3,"sources":["webpack:///./src/components/Spinner.vue?d4d7","webpack:///./src/components/Spinner.vue","webpack:///./src/components/Spinner.vue?c088","webpack:///./src/views/AdminUsers.vue","webpack:///./src/views/AdminUsers.vue?fbcd","webpack:///./src/apis/admin.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/AdminNav.vue","webpack:///./src/components/AdminNav.vue?c69a"],"names":["class","script","render","__scopeId","scope","width","isLoading","users","user","key","id","email","isAdmin","type","name","components","AdminNav","Spinner","data","computed","created","this","fetchUsers","methods","admin","get","status","Error","message","console","log","fire","icon","title","toggleUserRole","userId","update","toString","map","categories","apiHelper","create","post","categoryId","put","delete","restaurants","formData","getDetail","restaurantId","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","length","undefined","to"],"mappings":"kHAAA,W,+HCCOA,MAAM,W,EACT,eAIM,OAJDA,MAAM,mBAAiB,CAC1B,eAAO,OACP,eAAO,OACP,eAAO,S,mEAJX,eAMM,MANN,EAMM,CALJ,O,UCDJ,MAAMC,EAAS,GAGfA,EAAOC,OAASA,EAChBD,EAAOE,UAAY,kBAEJ,U,qFCNRH,MAAM,kB,GAGFA,MAAM,S,EACX,eAeQ,SAfDA,MAAM,cAAY,CACvB,eAaK,WAZH,eAEK,MAFDI,MAAM,OAAM,OAGhB,eAEK,MAFDA,MAAM,OAAM,WAGhB,eAEK,MAFDA,MAAM,OAAM,UAGhB,eAEK,MAFDA,MAAM,MAAMC,MAAM,OAAM,gB,MAOxBD,MAAM,O,6GAtBlB,eAyCM,MAzCN,EAyCM,CAxCJ,eAAY,GACG,EAAAE,W,iBAAf,eAA4B,Y,sBAC5B,eAqCQ,QArCR,EAqCQ,CApCN,EAgBA,eAmBQ,e,mBAlBN,eAiBK,2BAjBc,EAAAC,OAAK,SAAbC,G,wBAAX,eAiBK,MAjBsBC,IAAKD,EAAKE,I,CACnC,eAEK,KAFL,EAEK,eADAF,EAAKE,IAAE,GAEZ,eAAyB,yBAAlBF,EAAKG,OAAK,GACjB,eAA8C,yBAAvCH,EAAKI,QAAO,mBACnB,eAUK,WATH,eAQS,UAPPC,KAAK,SACLb,MAAM,eACL,QAAK,mBAAmB,iBAAc,QAAW,EAAK,GAAE,QAAW,EAAK,Y,eAItEQ,EAAKI,QAAO,oD,8IAgBd,GACbE,KAAM,aACNC,WAAY,CACVC,WAAA,KACAC,UAAA,MAEFC,KANa,WAOX,MAAO,CACLX,MAAO,GACPD,WAAW,IAGfa,SAAU,kBACL,eAAS,CAAC,iBAEfC,QAfa,WAgBXC,KAAKC,cAEPC,QAAS,CACDD,WADC,WACa,gLAEhB,EAAKhB,WAAY,EAFD,SAGOkB,EAAA,KAASjB,MAAMkB,MAHtB,mBAGRP,EAHQ,EAGRA,KAEY,UAAhBA,EAAKQ,OALO,sBAMR,IAAIC,MAAMT,EAAKU,SANP,OAQhB,EAAKrB,MAAQW,EAAKX,MAClB,EAAKD,WAAY,EATD,qDAWhBuB,QAAQC,IAAR,MACA,EAAKxB,WAAY,EACjB,OAAMyB,KAAK,CACTC,KAAM,QACNC,MAAO,mBAfO,6DAmBdC,eApBC,YAoBoC,2KAAnBC,EAAmB,EAAnBA,OAAQvB,EAAW,EAAXA,QAAW,kBAEhBY,EAAA,KAASjB,MAAM6B,OAAO,CAC3CD,SACAvB,UAAWA,GAASyB,aAJiB,mBAE/BnB,EAF+B,EAE/BA,KAIY,UAAhBA,EAAKQ,OAN8B,sBAO/B,IAAIC,MAAMT,EAAKU,SAPgB,OASvC,EAAKrB,MAAQ,EAAKA,MAAM+B,KAAI,SAAA9B,GAC1B,OAAIA,EAAKE,KAAOyB,EACd,iCACK3B,GADL,IAEEI,SAAUA,IAGPJ,KAhB8B,qDAmBvCqB,QAAQC,IAAI,KAAEF,SACd,OAAMG,KAAK,CACTC,KAAM,QACNC,MAAO,mBAtB8B,+DCvF/C,EAAO/B,OAASA,EAED,gB,4DCHA,QACbqC,WAAY,CACVd,IADU,WAER,OAAOe,OAAUf,IAAI,sBAEvBgB,OAJU,YAIQ,IAAR3B,EAAQ,EAARA,KACR,OAAO0B,OAAUE,KAAK,oBAAqB,CAAE5B,UAE/CsB,OAPU,YAOoB,IAApBO,EAAoB,EAApBA,WAAY7B,EAAQ,EAARA,KACpB,OAAO0B,OAAUI,IAAV,4BAAmCD,GAAc,CAAE7B,UAE5D+B,OAVU,YAUc,IAAdF,EAAc,EAAdA,WACR,OAAOH,OAAUK,OAAV,4BAAsCF,MAGjDG,YAAa,CACXL,OADW,YACW,IAAZM,EAAY,EAAZA,SACR,OAAOP,OAAUE,KAAK,qBAAsBK,IAE9CtB,IAJW,WAKT,OAAOe,OAAUf,IAAI,uBAEvBuB,UAPW,YAOkB,IAAhBC,EAAgB,EAAhBA,aACX,OAAOT,OAAUf,IAAV,6BAAoCwB,KAE7Cb,OAVW,YAUyB,IAA1Ba,EAA0B,EAA1BA,aAAcF,EAAY,EAAZA,SACtB,OAAOP,OAAUI,IAAV,6BAAoCK,GAAgBF,IAE7DF,OAbW,YAae,IAAhBI,EAAgB,EAAhBA,aACR,OAAOT,OAAUK,OAAV,6BAAuCI,MAGlD1C,MAAO,CACLkB,IADK,WAEH,OAAOe,OAAUf,IAAI,iBAEvBW,OAJK,YAIwB,IAAnBD,EAAmB,EAAnBA,OAAQvB,EAAW,EAAXA,QAChB,OAAO4B,OAAUI,IAAV,uBAA8BT,GAAU,CAAEvB,gB,kCCtCvD,IAAIsC,EAAI,EAAQ,QACZC,EAAO,EAAQ,QAAgCb,IAC/Cc,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,OAKvDF,EAAE,CAAEI,OAAQ,QAASC,OAAO,EAAMC,QAASH,GAAuB,CAChEf,IAAK,SAAamB,GAChB,OAAON,EAAK9B,KAAMoC,EAAYC,UAAUC,OAAS,EAAID,UAAU,QAAKE,O,qDCXjE5D,MAAM,Q,EACT,eAAa,UAAT,QAAI,G,iBAC6B,iB,iBAEvB,O,iBACsB,c,iBAAwB,O,iBAG3D,W,oFARH,eAWM,MAXN,EAWM,CAVJ,EACA,eAEc,GAFD6D,GAAG,sBAAoB,C,wBAAC,iBAErC,C,cACA,eAA4D,GAA/CA,GAAG,qBAAmB,C,wBAAC,iBAAU,C,cAC9C,eAIc,GAHZA,GAAG,gBAAc,C,wBAClB,iBAED,C,cAKW,OACb/C,KAAM,YCdR,EAAOZ,OAASA,EAED","file":"js/chunk-05fcd4b4.c864a784.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Spinner.vue?vue&type=style&index=0&id=bb4a7a2a&scoped=true&lang=css\"","<template>\n  <div class=\"spinner\">\n    <div class=\"bouncing-loader\">\n      <div />\n      <div />\n      <div />\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.spinner {\n  padding-top: 100px;\n}\n.bouncing-loader {\n  display: flex;\n  justify-content: center;\n}\n.bouncing-loader > div {\n  width: 1rem;\n  height: 1rem;\n  margin: 3rem 0.2rem;\n  background: #bd2333;\n  border-radius: 50%;\n  animation: bouncing-loader 0.6s infinite alternate;\n}\n.bouncing-loader > div:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.bouncing-loader > div:nth-child(3) {\n  animation-delay: 0.4s;\n}\n@keyframes bouncing-loader {\n  from {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  to {\n    opacity: 0.1;\n    transform: translateY(-1rem);\n  }\n}\n</style>\n","import { render } from \"./Spinner.vue?vue&type=template&id=bb4a7a2a&scoped=true\"\nconst script = {}\n\nimport \"./Spinner.vue?vue&type=style&index=0&id=bb4a7a2a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-bb4a7a2a\"\n\nexport default script","<template>\n  <div class=\"container py-5\">\n    <AdminNav />\n    <Spinner v-if=\"isLoading\" />\n    <table class=\"table\">\n      <thead class=\"thead-dark\">\n        <tr>\n          <th scope=\"col\">\n            #\n          </th>\n          <th scope=\"col\">\n            Email\n          </th>\n          <th scope=\"col\">\n            Role\n          </th>\n          <th scope=\"col\" width=\"140\">\n            Action\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"user in users\" :key=\"user.id\">\n          <th scope=\"row\">\n            {{ user.id }}\n          </th>\n          <td>{{ user.email }}</td>\n          <td>{{ user.isAdmin ? 'Admin' : 'user' }}</td>\n          <td>\n            <button\n              type=\"button\"\n              class=\"btn btn-link\"\n              @click=\"\n                toggleUserRole({ userId: user.id, isAdmin: user.isAdmin })\n              \"\n            >\n              {{ user.isAdmin ? 'Set as user' : 'Set as admin' }}\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport AdminNav from './../components/AdminNav'\nimport { mapState } from 'vuex'\nimport adminAPI from './../apis/admin'\nimport { Toast } from './../utils/helpers'\nimport Spinner from './../components/Spinner'\n\nexport default {\n  name: 'AdminUsers',\n  components: {\n    AdminNav,\n    Spinner\n  },\n  data () {\n    return {\n      users: [],\n      isLoading: true\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  created () {\n    this.fetchUsers()\n  },\n  methods: {\n    async fetchUsers () {\n      try {\n        this.isLoading = true\n        const { data } = await adminAPI.users.get()\n\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n        this.users = data.users\n        this.isLoading = false\n      } catch (e) {\n        console.log(e)\n        this.isLoading = false\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得會員資料，請稍後再試'\n        })\n      }\n    },\n    async toggleUserRole ({ userId, isAdmin }) {\n      try {\n        const { data } = await adminAPI.users.update({\n          userId,\n          isAdmin: (!isAdmin).toString()\n        })\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n        this.users = this.users.map(user => {\n          if (user.id === userId) {\n            return {\n              ...user,\n              isAdmin: !isAdmin\n            }\n          }\n          return user\n        })\n      } catch (e) {\n        console.log(e.message)\n        Toast.fire({\n          icon: 'error',\n          title: '無法更新會員角色，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./AdminUsers.vue?vue&type=template&id=0e262c1b\"\nimport script from \"./AdminUsers.vue?vue&type=script&lang=js\"\nexport * from \"./AdminUsers.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { apiHelper } from './../utils/helpers'\n\nexport default {\n  categories: {\n    get () {\n      return apiHelper.get('/admin/categories')\n    },\n    create ({ name }) {\n      return apiHelper.post('/admin/categories', { name })\n    },\n    update ({ categoryId, name }) {\n      return apiHelper.put(`/admin/categories/${categoryId}`, { name })\n    },\n    delete ({ categoryId }) {\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\n    }\n  },\n  restaurants: {\n    create ({ formData }) {\n      return apiHelper.post('/admin/restaurants', formData)\n    },\n    get () {\n      return apiHelper.get('/admin/restaurants')\n    },\n    getDetail ({ restaurantId }) {\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\n    },\n    update ({ restaurantId, formData }) {\n      return apiHelper.put(`/admin/restaurants/${restaurantId}`, formData)\n    },\n    delete ({ restaurantId }) {\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\n    }\n  },\n  users: {\n    get () {\n      return apiHelper.get('/admin/users')\n    },\n    update ({ userId, isAdmin }) {\n      return apiHelper.put(`/admin/users/${userId}`, { isAdmin })\n    }\n  }\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n  <div class=\"mb-3\">\n    <h1>餐廳後台</h1>\n    <router-link to=\"/admin/restaurants\">\n      Restaurants\n    </router-link> |\n    <router-link to=\"/admin/categories\">Categories</router-link> |\n    <router-link\n      to=\"/admin/users\"\n    >\n      Users\n    </router-link>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AdminNav'\n}\n</script>\n","import { render } from \"./AdminNav.vue?vue&type=template&id=add7975e\"\nimport script from \"./AdminNav.vue?vue&type=script&lang=js\"\nexport * from \"./AdminNav.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}