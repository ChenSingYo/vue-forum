(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05fcd4b4"],{"102b":function(e,t,n){"use strict";n("5d80")},2375:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["H"])("data-v-bb4a7a2a");Object(r["s"])("data-v-bb4a7a2a");var c={class:"spinner"},s=Object(r["g"])("div",{class:"bouncing-loader"},[Object(r["g"])("div"),Object(r["g"])("div"),Object(r["g"])("div")],-1);Object(r["q"])();var i=a((function(e,t){return Object(r["p"])(),Object(r["d"])("div",c,[s])}));n("102b");const u={};u.render=i,u.__scopeId="data-v-bb4a7a2a";t["a"]=u},"5d80":function(e,t,n){},6135:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={class:"container py-5"},c={class:"table"},s=Object(r["g"])("thead",{class:"thead-dark"},[Object(r["g"])("tr",null,[Object(r["g"])("th",{scope:"col"}," # "),Object(r["g"])("th",{scope:"col"}," Email "),Object(r["g"])("th",{scope:"col"}," Role "),Object(r["g"])("th",{scope:"col",width:"140"}," Action ")])],-1),i={scope:"row"};function u(e,t,n,u,o,d){var b=Object(r["w"])("AdminNav"),g=Object(r["w"])("Spinner");return Object(r["p"])(),Object(r["d"])("div",a,[Object(r["g"])(b),o.isLoading?(Object(r["p"])(),Object(r["d"])(g,{key:0})):Object(r["e"])("",!0),Object(r["g"])("table",c,[s,Object(r["g"])("tbody",null,[(Object(r["p"])(!0),Object(r["d"])(r["a"],null,Object(r["v"])(o.users,(function(e){return Object(r["p"])(),Object(r["d"])("tr",{key:e.id},[Object(r["g"])("th",i,Object(r["y"])(e.id),1),Object(r["g"])("td",null,Object(r["y"])(e.email),1),Object(r["g"])("td",null,Object(r["y"])(e.isAdmin?"Admin":"user"),1),Object(r["g"])("td",null,[Object(r["g"])("button",{type:"button",class:"btn btn-link",onClick:function(t){return d.toggleUserRole({userId:e.id,isAdmin:e.isAdmin})}},Object(r["y"])(e.isAdmin?"Set as user":"Set as admin"),9,["onClick"])])])})),128))])])])}var o=n("1da1"),d=n("5530"),b=(n("d3b7"),n("25f0"),n("d81d"),n("96cf"),n("e04c")),g=n("5502"),l=n("be6c"),j=n("2fa3"),O=n("2375"),f={name:"AdminUsers",components:{AdminNav:b["a"],Spinner:O["a"]},data:function(){return{users:[],isLoading:!0}},computed:Object(d["a"])({},Object(g["b"])(["currentUser"])),created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,l["a"].users.get();case 4:if(n=t.sent,r=n.data,"error"!==r.status){t.next=8;break}throw new Error(r.message);case 8:e.users=r.users,e.isLoading=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),e.isLoading=!1,j["a"].fire({icon:"error",title:"無法取得會員資料，請稍後再試"});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},toggleUserRole:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.userId,a=e.isAdmin,n.prev=1,n.next=4,l["a"].users.update({userId:r,isAdmin:(!a).toString()});case 4:if(c=n.sent,s=c.data,"error"!==s.status){n.next=8;break}throw new Error(s.message);case 8:t.users=t.users.map((function(e){return e.id===r?Object(d["a"])(Object(d["a"])({},e),{},{isAdmin:!a}):e})),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](1),console.log(n.t0.message),j["a"].fire({icon:"error",title:"無法更新會員角色，請稍後再試"});case 15:case"end":return n.stop()}}),n,null,[[1,11]])})))()}}};f.render=u;t["default"]=f},be6c:function(e,t,n){"use strict";n("b0c0");var r=n("2fa3");t["a"]={categories:{get:function(){return r["b"].get("/admin/categories")},create:function(e){var t=e.name;return r["b"].post("/admin/categories",{name:t})},update:function(e){var t=e.categoryId,n=e.name;return r["b"].put("/admin/categories/".concat(t),{name:n})},delete:function(e){var t=e.categoryId;return r["b"].delete("/admin/categories/".concat(t))}},restaurants:{create:function(e){var t=e.formData;return r["b"].post("/admin/restaurants",t)},get:function(){return r["b"].get("/admin/restaurants")},getDetail:function(e){var t=e.restaurantId;return r["b"].get("/admin/restaurants/".concat(t))},update:function(e){var t=e.restaurantId,n=e.formData;return r["b"].put("/admin/restaurants/".concat(t),n)},delete:function(e){var t=e.restaurantId;return r["b"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return r["b"].get("/admin/users")},update:function(e){var t=e.userId,n=e.isAdmin;return r["b"].put("/admin/users/".concat(t),{isAdmin:n})}}}},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,c=n("1dde"),s=c("map");r({target:"Array",proto:!0,forced:!s},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e04c:function(e,t,n){"use strict";var r=n("7a23"),a={class:"mb-3"},c=Object(r["g"])("h1",null,"餐廳後台",-1),s=Object(r["f"])(" Restaurants "),i=Object(r["f"])(" | "),u=Object(r["f"])("Categories"),o=Object(r["f"])(" | "),d=Object(r["f"])(" Users ");function b(e,t,n,b,g,l){var j=Object(r["w"])("router-link");return Object(r["p"])(),Object(r["d"])("div",a,[c,Object(r["g"])(j,{to:"/admin/restaurants"},{default:Object(r["E"])((function(){return[s]})),_:1}),i,Object(r["g"])(j,{to:"/admin/categories"},{default:Object(r["E"])((function(){return[u]})),_:1}),o,Object(r["g"])(j,{to:"/admin/users"},{default:Object(r["E"])((function(){return[d]})),_:1})])}var g={name:"AdminNav"};g.render=b;t["a"]=g}}]);
//# sourceMappingURL=chunk-05fcd4b4.c864a784.js.map